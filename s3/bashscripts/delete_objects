#!/usr/bin/env bash

# === delete_all_objects.sh ===
# Usage: ./delete_all_objects.sh <bucket-name>
# Example: ./delete_all_objects.sh my-bucket-123

set -e

BUCKET_NAME=$1

if [ -z "$BUCKET_NAME" ]; then
  echo "Usage: $0 <bucket-name>"
  exit 1
fi

echo "⚠️  Deleting ALL objects from bucket: $BUCKET_NAME"
read -p "Are you sure? (yes/no): " CONFIRM
if [ "$CONFIRM" != "yes" ]; then
  echo "❌ Cancelled."
  exit 1
fi

# Delete all objects (simple and fast)
aws s3 rm "s3://$BUCKET_NAME" --recursive

echo "✅ All objects deleted from bucket: $BUCKET_NAME"
